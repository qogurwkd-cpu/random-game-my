<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>ì˜¤ëŠ˜ì˜ í–‰ìš´ì•„ ì œë¹„ë½‘ê¸°</title>
<style>
  body { 
    font-family: 'Apple SD Gothic Neo', sans-serif; 
    text-align: center; 
    background-color: #f4f4f9; 
    padding: 20px; 
    margin: 0; 
  }
  h2 { color: #333; margin-bottom: 20px; }
  
  /* ì¸ì› ì„¤ì • ì°½ */
  .controls { 
    background: white; 
    padding: 15px; 
    border-radius: 12px; 
    box-shadow: 0 4px 10px rgba(0,0,0,0.05); 
    margin-bottom: 20px;
    font-size: 16px;
  }
  input { 
    width: 50px; 
    padding: 8px; 
    font-size: 16px; 
    text-align: center; 
    border: 1px solid #ccc;
    border-radius: 6px;
    margin: 0 5px;
  }
  button { 
    width: 100%;
    padding: 12px; 
    font-size: 18px; 
    font-weight: bold; 
    color: white; 
    background-color: #28a745; 
    border: none; 
    border-radius: 10px; 
    cursor: pointer; 
    margin-top: 15px;
    box-shadow: 0 4px 6px rgba(40,167,69,0.3);
  }
  button:active { 
    background-color: #218838; 
    transform: scale(0.98); 
  }
  
  /* ì œë¹„(ì¹´ë“œ) ì»¨í…Œì´ë„ˆ */
  .lots-container { 
    display: flex; 
    flex-wrap: wrap; 
    justify-content: center; 
    gap: 12px; 
    margin-top: 20px; 
  }
  
  /* ê°œë³„ ì œë¹„(ì¹´ë“œ) ë””ìì¸ */
  .lot { 
    width: 70px; 
    height: 100px; 
    background-color: #007bff; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    font-size: 20px; 
    font-weight: bold; 
    border-radius: 8px; 
    box-shadow: 0 4px 8px rgba(0,0,0,0.2); 
    transition: transform 0.4s, background-color 0.4s; 
    user-select: none; 
    color: white;
  }
  /* ì•ˆ ë½‘ì€ ì¹´ë“œ ê¸°ë³¸ ìƒíƒœ */
  .lot .text { display: none; }
  .lot .question { display: block; font-size: 30px; }

  /* ì¹´ë“œê°€ ë’¤ì§‘í˜”ì„ ë•Œ */
  .lot.opened { 
    transform: rotateY(180deg); 
  }
  .lot.opened .text { 
    display: block; 
    transform: rotateY(180deg); /* ê¸€ì”¨ê°€ ê±°ê¾¸ë¡œ ë³´ì´ì§€ ì•Šê²Œ ë‹¤ì‹œ ë’¤ì§‘ê¸° */
  }
  .lot.opened .question { display: none; }
  
  /* ê²°ê³¼ë³„ ìƒ‰ìƒ */
  .lot.opened.win { background-color: #dc3545; } /* ê½ì€ ë¹¨ê°„ìƒ‰ */
  .lot.opened.lose { background-color: #6c757d; } /* í†µê³¼ëŠ” íšŒìƒ‰ */
  .lot.opened.exemption { background-color: #ffc107; color: #333; } /* ğŸŒŸ ë©´ì œëŠ” ëˆˆë¶€ì‹  í™©ê¸ˆìƒ‰! */
</style>
</head>
<body>

  <h2>ì˜¤ëŠ˜ì˜ í–‰ìš´ì•„ ì œë¹„ë½‘ê¸°</h2>
  
  <div class="controls">
    <label>ì „ì²´ ì¸ì›: <input type="number" id="total" value="5" min="2" max="30"></label> ëª… <br><br>
    <label>ê½ ê°¯ìˆ˜: <input type="number" id="winCount" value="1" min="1" max="29"></label> ê°œ <br>
    <button onclick="startGame()">ìƒˆë¡œ ì„ê¸°!</button>
  </div>

  <div class="lots-container" id="lotsContainer"></div>

  <script>
    let results = [];

    function startGame() {
      const total = parseInt(document.getElementById('total').value);
      const winCount = parseInt(document.getElementById('winCount').value);
      const container = document.getElementById('lotsContainer');
      
      if (winCount >= total) {
        alert("ê½ ê°œìˆ˜ê°€ ì „ì²´ ì¸ì›ë³´ë‹¤ ì ì–´ì•¼ í•´!");
        return;
      }

      // 1. ê¸°ë³¸ ì„¸íŒ… (ì „ë¶€ í†µê³¼ë¡œ ì±„ìš°ê³ , ê½ ê°œìˆ˜ë§Œí¼ ë„£ê¸°)
      results = Array(total).fill('í†µê³¼');
      for (let i = 0; i < winCount; i++) {
        results[i] = 'ê½!';
      }

      // ğŸ¯ 2. í•¨ì •ì¹´ë“œ(ë©´ì œ!) 50% í™•ë¥  ë¡œì§ ì¶”ê°€!
      // ì „ì²´ ì¸ì›ì´ 10ëª… ì´ìƒì´ê³ , ëœë¤ ìˆ«ìê°€ 0.5 ë¯¸ë§Œ(50% í™•ë¥ )ì¼ ë•Œ
      if (total >= 10 && Math.random() < 0.5) {
        // ê½ì´ ì„¸íŒ…ëœ ë°”ë¡œ ë‹¤ìŒ ìë¦¬(ì›ë˜ 'í†µê³¼'ì¸ ìë¦¬)ë¥¼ 'ë©´ì œ!'ë¡œ ë°”ê¿ˆ
        results[winCount] = 'ë©´ì œ!';
      }

      // 3. ë°°ì—´ ì„ê¸° (ëœë¤ ì…”í”Œ)
      for (let i = results.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [results[i], results[j]] = [results[j], results[i]];
      }

      // 4. í™”ë©´ì— ì œë¹„ ì¹´ë“œ ê¹”ê¸°
      container.innerHTML = '';
      for (let i = 0; i < total; i++) {
        const lot = document.createElement('div');
        lot.className = 'lot';
        
        lot.innerHTML = `
          <span class="question">?</span>
          <span class="text">${results[i]}</span>
        `;
        
        lot.onclick = function() {
          if (this.classList.contains('opened')) return; 
          
          this.classList.add('opened');
          
          // ê²°ê³¼ì— ë§ì¶°ì„œ ë°°ê²½ìƒ‰(í´ë˜ìŠ¤) ì…í˜€ì£¼ê¸°
          if (results[i] === 'ê½!') {
            this.classList.add('win');
          } else if (results[i] === 'ë©´ì œ!') {
            this.classList.add('exemption'); // ğŸŒŸ í™©ê¸ˆìƒ‰ í´ë˜ìŠ¤ ì ìš©!
          } else {
            this.classList.add('lose');
          }
        };
        
        container.appendChild(lot);
      }
    }

    // ì²˜ìŒ ë¡œë”© ì‹œ ì¹´ë“œ ì„ì–´ì„œ ê¹”ì•„ë‘ê¸°
    startGame();
  </script>
</body>
</html>